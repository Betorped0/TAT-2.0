@model TAT001.Models.Calendario445ViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.pagina_r = 530;
    ViewBag.carpeta_r = 500;
}
<style>
    .text-center th {
        text-align: center !important;
    }
    .text-left th {
        text-align: left !important;
    }
    .text-left td {
        text-align: left !important;
    }
    .dataTables_length {
        display: none;
    }
    .dataTables_filter {
        display: none;
    }
    .dataTables_scrollHeadInner, .mdl-data-table {
        width: 100%;
    }
</style>
<link href="~/Content/dataTable.css" rel="stylesheet" />
<link href="//cdn.datatables.net/1.10.16/css/dataTables.material.min.css" rel="stylesheet" />
<script src="//code.jquery.com/jquery-1.12.4.js"></script>
<script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="//cdn.datatables.net/1.10.16/js/dataTables.material.min.js"></script>

<div class="row">
    <div class="col s12">
        <ul class="tabs">
            <li class="tab col s3"><a class="active" href="#periodo445"><label id="lbl_calendario445"></label> </a></li>
            <li class="tab col s3"><a href="#exceptions"><label id="lbl_excepciones"></label></a></li>
        </ul>
    </div>
    <div id="periodo445" class="col s12">
        <div class="card-panel">
            <div class="row">
                <div class="col s12 right-align">
                    <a class="btn-small" id="btn_create" href="@Url.Action("Create")"></a>
                </div>
                <div class="row" style="margin-bottom:0;">
                    <div class="input-field col s3 m3 l3">
                        <select id="cmbPagPeriodo445">
                            <option value="10" selected>10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                        <label class="btn_length"></label>
                    </div>
                    <div class="input-field col s3 m3 l3 offset-l6 offset-m6">
                        <input type="text" class="global_filter" id="gfilterPeriodo445">
                        <label for="global_filter" class="lbl_search"></label>
                    </div>
                </div>
                <div style="width:100%;">
                    <table class="table mdl-data-table striped" id="tablePeriodo445" style="width:100%; overflow-x: scroll;">
                        <thead>
                            <tr class="text-center">
                                <th colspan="3"> </th>
                                <th colspan="4"  class="lbl_precierre"></th>
                                <th colspan="4"  class="lbl_cierre"></th>
                            </tr>
                            <tr class="text-left">
                                <th class="lbl_coCode"></th>
                                <th class="lbl_periodo"></th>
                                <th class="lbl_tipoSolicitud"></th>
                                <th class="lbl_desdeDia"></th>
                                <th class="lbl_desdeHora"></th>
                                <th class="lbl_hastaDia"></th>
                                <th class="lbl_hastaHora"></th>
                                <th class="lbl_desdeDia"></th>
                                <th class="lbl_desdeHora"></th>
                                <th class="lbl_hastaDia"></th>
                                <th class="lbl_hastaHora"></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.calendarios445)
                        {
                                <tr class="text-left">
                                    <td>
                                        @Html.DisplayFor(modelItem => item.SOCIEDAD_ID)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PERIODO)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.TSOL_ID)
                                    </td>
                                    <td>
                                        @Convert.ToDateTime(item.PRE_FROMF).ToString("dd/MM/yyyy")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PRE_FROMH)
                                    </td>
                                    <td>
                                        @Convert.ToDateTime(item.PRE_TOF).ToString("dd/MM/yyyy")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PRE_TOH)
                                    </td>
                                    <td>
                                        @Convert.ToDateTime(item.CIE_FROMF).ToString("dd/MM/yyyy")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CIE_FROMH)
                                    </td>
                                    <td>
                                        @Convert.ToDateTime(item.CIE_TOF).ToString("dd/MM/yyyy")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CIE_TOH)
                                    </td>
                                    <td>
                                        <a href="@Url.Action("Edit", "Calendario445", new { ejercicio=item.EJERCICIO,  periodo= item.PERIODO,  sociedad_id= item.SOCIEDAD_ID,  tsol_id= item.TSOL_ID })"><i class='material-icons green-text'>edit</i></a>
                                        <a href="@Url.Action("Index", "CalendarioEx445", new { ejercicio = item.EJERCICIO, periodo = item.PERIODO, sociedad_id = item.SOCIEDAD_ID, tsol_id = item.TSOL_ID })"><i class='material-icons blue-text'>assignment_late</i></a>
                                    </td>
                                </tr>
                        }
                        </tbody>
                    </table>
                </div>
            </div>

            </div>
        </div>
    <div id="exceptions" class="col s12">
            <div class="card-panel">
                <div class="row">
                    <div class="row" style="margin-bottom:0;">
                        <div class="input-field col s3 m3 l3">
                            <select id="cmbPagExceptions">
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                            <label class="btn_length"></label>
                        </div>
                        <div class="input-field col s3 m3 l3 offset-l6 offset-m6">
                            <input type="text" class="global_filter" id="gfilterExceptions">
                            <label for="global_filter" class="lbl_search"></label>
                        </div>
                    </div>
                    <div style="width:100%;">
                        <table class="table mdl-data-table striped" id="tableExcepciones" style="width:100%;">
                            <thead>
                                <tr class="text-center">
                                    <th colspan="4"></th>
                                    <th colspan="4" class="lbl_precierre"></th>
                                </tr>
                                <tr class="text-left">
                                    <th class="lbl_coCode"></th>
                                    <th class="lbl_periodo"></th>
                                    <th class="lbl_tipoSolicitud"></th>
                                    <th class="lbl_usuario" style="min-width: 250px;"></th>
                                    <th class="lbl_desdeDia"></th>
                                    <th class="lbl_desdeHora"></th>
                                    <th class="lbl_hastaDia"></th>
                                    <th class="lbl_hastaHora"></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.calendariosEx445)
                                {
                                    string nombreCompleto = item.USUARIO.NOMBRE + " " + item.USUARIO.APELLIDO_P + " " + (item.USUARIO.APELLIDO_M == null ? "" : item.USUARIO.APELLIDO_M);
                                    <tr class="text-left">
                                        <td>
                                            @Html.DisplayFor(modelItem => item.SOCIEDAD_ID)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.PERIODO)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TSOL_ID)
                                        </td>
                                        <td>
                                            @nombreCompleto
                                        </td>
                                        <td>
                                            @Convert.ToDateTime(item.EX_FROMF).ToString("dd/MM/yyyy")
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.EX_FROMH)
                                        </td>
                                        <td>
                                            @Convert.ToDateTime(item.EX_TOF).ToString("dd/MM/yyyy")
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.EX_TOH)
                                        </td>
                                        <td>
                                            <a href="@Url.Action("Edit", "CalendarioEx445", new { ejercicio=item.EJERCICIO,  periodo= item.PERIODO,  sociedad_id= item.SOCIEDAD_ID,  tsol_id= item.TSOL_ID,usuario_id=item.USUARIO_ID , paginaIndex = "Calendario445"})"><i class='material-icons green-text'>edit</i></a>
                                         </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div>
     </div>
</div>
<script type="text/javascript" src="~/Scripts/fnCommon.js"></script>
<script>

    //---- Inicializador de componentes Materialize----
    fnCommon.materializeInit('select', 'select');
    fnCommon.materializeInit('.tabs', 'tabs');

    //----- Configuracion de Tablas-----
    $(document).ready(function () {
        var root = "@Url.Content("~")",
            spras_id = "@ViewBag.spras_id",
            urlLanguage = root + "/Scripts/lang/" + spras_id + ".json";
        fnCommon.configurarTable('tablePeriodo445', '50vh', '50vh', urlLanguage, 'cmbPagPeriodo445','gfilterPeriodo445');
        fnCommon.configurarTable('tableExcepciones', '40vh', '40vh', urlLanguage, 'cmbPagExceptions', 'gfilterExceptions');
    });

</script>






